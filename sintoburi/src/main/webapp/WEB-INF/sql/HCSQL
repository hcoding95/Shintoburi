CREATE TABLE TBL_USER (
    USER_ID VARCHAR2(40) PRIMARY KEY,
    GRADE CHAR(1) DEFAULT 'B' CHECK (GRADE IN ('B','S','M')) NOT NULL,
    USER_PASSWORD VARCHAR2(30) NOT NULL,
    USER_POINT NUMBER(10) DEFAULT 0 ,
    ADDRESS VARCHAR2(300) NOT NULL,
    USER_NAME VARCHAR2(40) NOT NULL
);

-- 테스트용 계정 생성
insert into tbl_user ( user_id, user_password, address, user_name)
values('user01', '1234', '울산 광역시 남구', '김동동' );
commit;
CREATE TABLE TBL_BLOG (
    BLOG_NO NUMBER(10) PRIMARY KEY,
    USER_ID VARCHAR2(40) REFERENCES TBL_USER(USER_ID)ON DELETE CASCADE,
    BLOG_CONTENT VARCHAR2(4000),
    REGDATE DATE DEFAULT SYSDATE,
    UPDATEDATE DATE
);

CREATE SEQUENCE SEQ_BLOG
START WITH 1
INCREMENT BY 1
NOCACHE;

CREATE TABLE TBL_BLOG_REPLY (
    BLOG_RNO NUMBER(10) PRIMARY KEY,
    BLOG_NO NUMBER(10)REFERENCES TBL_BLOG (BLOG_NO)ON DELETE CASCADE,
    REPLYER VARCHAR2(40) REFERENCES TBL_USER(USER_ID)ON DELETE CASCADE,
    REPLY_CONTENT VARCHAR2(400),
    REGDATE DATE DEFAULT SYSDATE,
    UPDATEDATE DATE
);

CREATE SEQUENCE SEQ_BLOG_REPLY
START WITH 1
INCREMENT BY 1
NOCACHE;

CREATE TABLE TBL_USER_FOLLOW (
    FOLLOW_NO NUMBER(10) primary key,
    USER_FOLLOWER VARCHAR2(40) REFERENCES TBL_USER(USER_ID) ON DELETE CASCADE,
    USER_FOLLOWING VARCHAR2(40) REFERENCES TBL_USER(USER_ID) ON DELETE CASCADE
);

CREATE SEQUENCE SEQ_USER_FOLLOW
START WITH 1
INCREMENT BY 1
NOCACHE;


CREATE TABLE TBL_BLOG_IMG (
    UUID VARCHAR2(100) PRIMARY KEY,
    BLOG_NO NUMBER(10) REFERENCES TBL_BLOG (BLOG_NO) ON DELETE CASCADE,
    FILE_NAME VARCHAR2(400) NOT NULL,
    FILE_PATH VARCHAR2(400) NOT NULL
);

CREATE TABLE TBL_PROFILE_IMG (
    UUID VARCHAR2(100) PRIMARY KEY,
    USER_ID VARCHAR2(40) REFERENCES TBL_USER(USER_ID)ON DELETE CASCADE,
    FILE_NAME VARCHAR2(400) NOT NULL,
    FILE_PATH VARCHAR2(400) NOT NULL
);


create table TBL_PRODUCT(
    PRODUCT_ID NUMBER(10) PRIMARY KEY,
    PRODUCT_NAME VARCHAR2(100) NOT NULL
);


INSERT INTO TBL_PRODUCT( PRODUCT_ID, PRODUCT_NAME)
VALUES ( 1001, '테스트 상품1');
INSERT INTO TBL_PRODUCT( PRODUCT_ID, PRODUCT_NAME)
VALUES ( 1002, '테스트 상품2');
INSERT INTO TBL_PRODUCT( PRODUCT_ID, PRODUCT_NAME)
VALUES ( 2001, '테스트 상품3');
INSERT INTO TBL_PRODUCT( PRODUCT_ID, PRODUCT_NAME)
VALUES ( 3124, '테스트 상품4');
COMMIT;


Create Table Tbl_Blog_Tag(
    Blog_No Number(10) References Tbl_Blog(Blog_No) ON DELETE CASCADE,
    Product_Id Number(10) References Tbl_Product(Product_Id),
    Constraint Pk_Blog_Tag Primary Key (Blog_No, Product_Id)
);