
CREATE TABLE TBL_USER (
    USER_ID VARCHAR2(40) PRIMARY KEY,
    GRADE CHAR(1) DEFAULT 'B' CHECK (GRADE IN ('B','S','M')) NOT NULL,
    USER_PASSWORD VARCHAR2(30) NOT NULL,
    USER_POINT NUMBER(10) DEFAULT 0 ,
    ADDRESS VARCHAR2(300) NOT NULL,
    USER_NAME VARCHAR2(40) NOT NULL
);
DROP TABLE TBL_USER;

-- 테스트용 계정 생성
insert into ubl_user ( user_id, user_password, address)
values( 'user01', '1234', '울산 광역시 남구동동' );

CREATE TABLE TBL_BLOG (
    BLOG_NO NUMBER(10) PRIMARY KEY,
    USER_ID VARCHAR2(40) REFERENCES TBL_USER(USER_ID) ,
    BLOG_CONTENT VARCHAR2(4000),
    REGDATE DATE DEFAULT SYSDATE,
    UPDATEDATE DATE
);
DROP TABLE TBL_BLOG;
CREATE SEQUENCE SEQ_BLOG
START WITH 1
INCREMENT BY 1
NOCACHE;

CREATE TABLE TBL_BLOG_REPLY (
    BLOG_RNO NUMBER(10) PRIMARY KEY,
    BLOG_NO NUMBER(10)REFERENCES TBL_BLOG (BLOG_NO),
    REPLYER VARCHAR2(40) REFERENCES TBL_USER(USER_ID),
    REPLY_CONTENT VARCHAR2(400),
    REGDATE DATE DEFAULT SYSDATE,
    UPDATEDATE DATE
);
DROP TABLE TBL_BLOG_REPLY;
CREATE SEQUENCE SEQ_BLOG_REPLY
START WITH 1
INCREMENT BY 1
NOCACHE;

CREATE TABLE TBL_USER_FOLLOW (
    FOLLOW_NO NUMBER(10),
    USER_FOLLOWER VARCHAR2(40) REFERENCES TBL_USER(USER_ID),
    USER_FOLLOWING VARCHAR2(40) REFERENCES TBL_USER(USER_ID)
);

CREATE SEQUENCE SEQ_USER_FOLLOW
START WITH 1
INCREMENT BY 1
NOCACHE;

DROP TABLE TBL_USER_FOLLOW;

CREATE TABLE TBL_BLOG_IMG (
    UUID VARCHAR2(100) PRIMARY KEY,
    BLOG_NO NUMBER(10) REFERENCES TBL_BLOG (BLOG_NO),
    FILENAME VARCHAR2(400) NOT NULL,
    FILE_PATH VARCHAR2(400) NOT NULL
);

CREATE TABLE TBL_PROFILE_IMG (
    UUID VARCHAR2(100) PRIMARY KEY,
    USER_ID VARCHAR2(40) REFERENCES TBL_USER(USER_ID),
    FILENAME VARCHAR2(400) NOT NULL,
    FILE_PATH VARCHAR2(400) NOT NULL
);

DROP TABLE TBL_BLOG_IMG;